# è‚¡ç¥¨ä¸æŒ‡æ•°å¯è§†åŒ–å·¥å…· | Stock & Index Visualization Tool (Refactored)

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¤šè‚¡ç¥¨å’ŒæŒ‡æ•°å¯è§†åŒ–å·¥å…·ï¼Œæ”¯æŒå®æ—¶æ•°æ®è·å–ã€äº¤äº’å¼å›¾è¡¨å’Œæ·±å…¥çš„æ•°æ®åˆ†æã€‚

A powerful multi-stock and index visualization tool with real-time data fetching, interactive charts, and comprehensive data analysis.

## ğŸŒŸ ä¸»è¦ç‰¹æ€§ | Key Features

### ğŸ“ˆ å¤šæ•°æ®æºæ”¯æŒ | Multi-Data Source Support
- **è‚¡ç¥¨æ•°æ®**: æ”¯æŒAè‚¡è‚¡ç¥¨å®æ—¶æ•°æ®
- **ETFåŸºé‡‘**: æ”¯æŒETFåŸºé‡‘æ•°æ®
- **æŒ‡æ•°æ•°æ®**: æ”¯æŒä¸»è¦è‚¡æŒ‡æ•°æ®
- **è‡ªåŠ¨æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ«ä»£ç ç±»å‹å¹¶é€‰æ‹©åˆé€‚çš„æ•°æ®æº

### ğŸ“Š ä¸°å¯Œçš„å¯è§†åŒ– | Rich Visualization
- **äº¤äº’å¼å›¾è¡¨**: åŸºäºPlotlyçš„é«˜è´¨é‡äº¤äº’å¼å›¾è¡¨
- **ä»·æ ¼èµ°åŠ¿**: æ”¯æŒæ ‡å‡†åŒ–å’Œéæ ‡å‡†åŒ–ä»·æ ¼å¯¹æ¯”
- **æˆäº¤é‡åˆ†æ**: è¯¦ç»†çš„æˆäº¤é‡å¯è§†åŒ–
- **æ”¶ç›Šç‡åˆ†æ**: ç´¯è®¡æ”¶ç›Šç‡å’Œæ³¢åŠ¨ç‡åˆ†æ
- **å¤šæ—¶é—´èŒƒå›´**: çµæ´»çš„æ—¶é—´èŒƒå›´é€‰æ‹©å™¨

### ğŸ“‹ æ•°æ®åˆ†æå·¥å…· | Data Analysis Tools
- **ç»Ÿè®¡æ‘˜è¦**: è¯¦ç»†çš„ç»Ÿè®¡æŒ‡æ ‡è®¡ç®—
- **è‚¡ç¥¨æ¯”è¾ƒ**: å¤šè‚¡ç¥¨æ¨ªå‘å¯¹æ¯”åˆ†æ
- **æ•°æ®å¯¼å‡º**: æ”¯æŒCSVã€JSONç­‰å¤šç§æ ¼å¼å¯¼å‡º
- **å®æ—¶ç¼“å­˜**: æ™ºèƒ½æ•°æ®ç¼“å­˜æå‡æ€§èƒ½

## ğŸ—ï¸ æ¶æ„è®¾è®¡ | Architecture

### é¡¹ç›®ç»“æ„ | Project Structure
```
stock_visualization/
â”œâ”€â”€ main.py                 # ä¸»åº”ç”¨å…¥å£ | Main application entry
â”œâ”€â”€ config.py              # é…ç½®æ–‡ä»¶ | Configuration
â”œâ”€â”€ requirements.txt       # ä¾èµ–åŒ… | Dependencies
â”œâ”€â”€ data/                  # æ•°æ®æ¨¡å— | Data module
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ fetcher.py         # æ•°æ®è·å– | Data fetching
â”‚   â””â”€â”€ processor.py       # æ•°æ®å¤„ç† | Data processing
â”œâ”€â”€ components/            # UIç»„ä»¶ | UI components
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ sidebar.py         # ä¾§è¾¹æ ç»„ä»¶ | Sidebar components
â”‚   â”œâ”€â”€ charts.py          # å›¾è¡¨ç»„ä»¶ | Chart components
â”‚   â””â”€â”€ tables.py          # è¡¨æ ¼ç»„ä»¶ | Table components
â””â”€â”€ utils/                 # å·¥å…·æ¨¡å— | Utilities
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ validators.py      # éªŒè¯å·¥å…· | Validators
    â””â”€â”€ formatters.py      # æ ¼å¼åŒ–å·¥å…· | Formatters
```

### æ ¸å¿ƒæ¨¡å— | Core Modules

#### 1. æ•°æ®å±‚ | Data Layer (`data/`)
- **StockDataFetcher**: è´Ÿè´£ä»å¤šä¸ªæ•°æ®æºè·å–è‚¡ç¥¨ã€åŸºé‡‘ã€æŒ‡æ•°æ•°æ®
- **DataProcessor**: å¤„ç†æ•°æ®æ ‡å‡†åŒ–ã€æ”¶ç›Šç‡è®¡ç®—ç­‰æ•°æ®è½¬æ¢

#### 2. ç»„ä»¶å±‚ | Component Layer (`components/`)
- **SidebarComponents**: ç®¡ç†æ‰€æœ‰ä¾§è¾¹æ UIç»„ä»¶
- **ChartComponents**: å¤„ç†æ‰€æœ‰å›¾è¡¨åˆ›å»ºå’Œå¯è§†åŒ–
- **TableComponents**: ç®¡ç†æ•°æ®è¡¨æ ¼æ˜¾ç¤ºå’Œä¸‹è½½åŠŸèƒ½

#### 3. å·¥å…·å±‚ | Utility Layer (`utils/`)
- **CodeValidator**: å¤„ç†è‚¡ç¥¨ä»£ç éªŒè¯å’Œè¾“å…¥éªŒè¯
- **DataFormatter**: æ ¼å¼åŒ–æ•°æ®æ˜¾ç¤ºå’Œå¯¼å‡º

## ğŸš€ å¿«é€Ÿå¼€å§‹ | Quick Start

### å®‰è£…ä¾èµ– | Install Dependencies
```bash
pip install -r requirements.txt
```

### è¿è¡Œåº”ç”¨ | Run Application
```bash
streamlit run main.py
```

### ä½¿ç”¨æ–¹æ³• | Usage

1. **è¾“å…¥è‚¡ç¥¨ä»£ç **: åœ¨ä¾§è¾¹æ è¾“å…¥6ä½æ•°å­—è‚¡ç¥¨/åŸºé‡‘/æŒ‡æ•°ä»£ç 
2. **é€‰æ‹©æ—¥æœŸèŒƒå›´**: è®¾ç½®æ•°æ®çš„å¼€å§‹å’Œç»“æŸæ—¥æœŸ
3. **é…ç½®é€‰é¡¹**: é€‰æ‹©æ˜¯å¦æ ‡å‡†åŒ–ä»·æ ¼ã€å¤æƒæ–¹å¼ç­‰
4. **æŸ¥çœ‹åˆ†æ**: åœ¨å¤šä¸ªæ ‡ç­¾é¡µä¸­æŸ¥çœ‹ä»·æ ¼èµ°åŠ¿ã€æˆäº¤é‡ã€æ”¶ç›Šç‡
5. **å¯¼å‡ºæ•°æ®**: ä¸‹è½½åŸå§‹æ•°æ®æˆ–æ ¼å¼åŒ–æ•°æ®

### ç¤ºä¾‹ä»£ç  | Example Codes
```
è‚¡ç¥¨: 600000,601288,000001
åŸºé‡‘: 510300,510500,159919
æŒ‡æ•°: 000001,399001,399006
```

## ğŸ”§ é…ç½®è¯´æ˜ | Configuration

### åº”ç”¨é…ç½® | Application Config (`config.py`)
```python
# ä¿®æ”¹é»˜è®¤è®¾ç½®
DEFAULT_START_DATE = datetime.date(2023, 1, 1)
CACHE_TTL = 3600  # ç¼“å­˜æ—¶é—´(ç§’)
MAX_WORKERS = 10  # å¹¶å‘è¯·æ±‚æ•°
```

### è‡ªå®šä¹‰æ ·å¼ | Custom Styling
åº”ç”¨æ”¯æŒé€šè¿‡CSSè‡ªå®šä¹‰æ ·å¼ï¼Œä¸»è¦æ ·å¼åœ¨`main.py`çš„`setup_styling`æ–¹æ³•ä¸­å®šä¹‰ã€‚

## ğŸ“Š åŠŸèƒ½è¯¦è§£ | Feature Details

### æ•°æ®è·å– | Data Fetching
- **å¹¶å‘è¯·æ±‚**: ä½¿ç”¨ThreadPoolExecutorå¹¶å‘è·å–å¤šä¸ªè‚¡ç¥¨æ•°æ®
- **å¤šæºå®¹é”™**: è‡ªåŠ¨å°è¯•è‚¡ç¥¨ã€åŸºé‡‘ã€æŒ‡æ•°ä¸‰ä¸ªæ•°æ®æº
- **æ™ºèƒ½ç¼“å­˜**: åŸºäºStreamlitçš„ç¼“å­˜æœºåˆ¶ï¼Œé¿å…é‡å¤è¯·æ±‚
- **è¿›åº¦æ˜¾ç¤º**: å®æ—¶æ˜¾ç¤ºæ•°æ®è·å–è¿›åº¦

### å›¾è¡¨åˆ†æ | Chart Analysis
- **æ ‡å‡†åŒ–å¯¹æ¯”**: å°†ä¸åŒè‚¡ç¥¨æ ‡å‡†åŒ–åˆ°ç›¸åŒèµ·ç‚¹ä¾¿äºæ¯”è¾ƒ
- **äº¤äº’åŠŸèƒ½**: æ”¯æŒç¼©æ”¾ã€å¹³ç§»ã€æ—¶é—´èŒƒå›´é€‰æ‹©
- **å¤šå›¾è¡¨ç±»å‹**: ä»·æ ¼èµ°åŠ¿ã€æˆäº¤é‡ã€æ”¶ç›Šç‡åˆ†æ
- **ä¸“ä¸šé…è‰²**: ä½¿ç”¨è‰²å½©å‹å¥½çš„ä¸“ä¸šé…è‰²æ–¹æ¡ˆ

### æ•°æ®åˆ†æ | Data Analysis
- **ç»Ÿè®¡æŒ‡æ ‡**: æ”¶ç›Šç‡ã€æ³¢åŠ¨ç‡ã€å¤æ™®æ¯”ç‡ç­‰
- **æ¯”è¾ƒåˆ†æ**: å¤šè‚¡ç¥¨æ¨ªå‘å¯¹æ¯”è¡¨æ ¼
- **æ•°æ®å¯¼å‡º**: åŸå§‹æ•°æ®ã€æ ¼å¼åŒ–æ•°æ®ã€JSONæ ¼å¼
- **æ±‡æ€»ä¿¡æ¯**: æ•°æ®ç‚¹æ•°é‡ã€æ—¶é—´è·¨åº¦ç­‰å…ƒä¿¡æ¯

## ğŸ”’ é”™è¯¯å¤„ç† | Error Handling

### æ•°æ®æºå®¹é”™ | Data Source Failover
```python
# æŒ‰ä¼˜å…ˆçº§å°è¯•æ•°æ®æº
data_sources = [
    ("stock", self._fetch_stock_data),
    ("fund", self._fetch_fund_data), 
    ("index", self._fetch_index_data)
]
```

### è¾“å…¥éªŒè¯ | Input Validation
- è‚¡ç¥¨ä»£ç æ ¼å¼éªŒè¯ï¼ˆ6ä½æ•°å­—ï¼‰
- æ—¥æœŸèŒƒå›´åˆç†æ€§æ£€æŸ¥
- æ•°æ®å®Œæ•´æ€§éªŒè¯

### ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯ | User-Friendly Error Messages
- ä¸­è‹±æ–‡åŒè¯­é”™è¯¯æç¤º
- å…·ä½“çš„é”™è¯¯åŸå› è¯´æ˜
- å»ºè®®çš„è§£å†³æ–¹æ¡ˆ

## ğŸ¨ ç•Œé¢è®¾è®¡ | UI Design

### å“åº”å¼å¸ƒå±€ | Responsive Layout
- è‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸
- åˆç†çš„ç»„ä»¶é—´è·å’Œå¸ƒå±€
- ä¸“ä¸šçš„è‰²å½©æ­é…

### ç”¨æˆ·ä½“éªŒ | User Experience
- ç›´è§‚çš„æ“ä½œæµç¨‹
- å®æ—¶çš„åé¦ˆä¿¡æ¯
- ä¾¿æ·çš„æ•°æ®å¯¼å‡º

## ğŸš€ æ€§èƒ½ä¼˜åŒ– | Performance Optimization

### ç¼“å­˜ç­–ç•¥ | Caching Strategy
- **æ•°æ®ç¼“å­˜**: 1å°æ—¶TTLé¿å…é‡å¤APIè°ƒç”¨
- **å‡½æ•°çº§ç¼“å­˜**: å¯¹æ•°æ®å¤„ç†å‡½æ•°è¿›è¡Œç¼“å­˜
- **ç”¨æˆ·ä¼šè¯ç¼“å­˜**: åŸºäºStreamlitçš„ä¼šè¯çŠ¶æ€

### å¹¶å‘å¤„ç† | Concurrent Processing
- **å¤šçº¿ç¨‹è·å–**: å¹¶å‘è·å–å¤šä¸ªè‚¡ç¥¨æ•°æ®
- **é™åˆ¶å¹¶å‘æ•°**: é˜²æ­¢APIé™æµ
- **ä¼˜é›…é™çº§**: å•ä¸ªè¯·æ±‚å¤±è´¥ä¸å½±å“æ•´ä½“

## ğŸ“ å¼€å‘è¯´æ˜ | Development Notes

### ä»£ç è§„èŒƒ | Code Standards
- **ç±»å‹æç¤º**: ä½¿ç”¨Pythonç±»å‹æç¤ºæé«˜ä»£ç å¯è¯»æ€§
- **æ–‡æ¡£å­—ç¬¦ä¸²**: è¯¦ç»†çš„å‡½æ•°å’Œç±»æ–‡æ¡£
- **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—åˆ†ç¦»å’Œä¾èµ–å…³ç³»

### æ‰©å±•å¼€å‘ | Extension Development
- **æ–°æ•°æ®æº**: åœ¨`StockDataFetcher`ä¸­æ·»åŠ æ–°çš„æ•°æ®è·å–æ–¹æ³•
- **æ–°å›¾è¡¨ç±»å‹**: åœ¨`ChartComponents`ä¸­æ·»åŠ æ–°çš„å¯è§†åŒ–
- **æ–°åˆ†æåŠŸèƒ½**: åœ¨`DataProcessor`ä¸­æ·»åŠ æ–°çš„è®¡ç®—æ–¹æ³•

## ğŸ“„ è®¸å¯è¯ | License

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚

This project is licensed under the MIT License - see the LICENSE file for details.

## ğŸ¤ è´¡çŒ® | Contributing

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

Contributions are welcome! Please feel free to submit a Pull Request.

## ğŸ“ æ”¯æŒ | Support

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤GitHub Issue
- å‘é€é‚®ä»¶è‡³é¡¹ç›®ç»´æŠ¤è€…

For questions or suggestions, please:
- Submit a GitHub Issue
- Email the project maintainers 